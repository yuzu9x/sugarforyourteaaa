<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
  @font-face {
    font-family: 'MainFont';
    src: url("{{ '/assets/fonts/Erika Ormig.ttf' | url }}") format('truetype');
    font-weight: normal;
    font-style: normal;
  }

  body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    background: #ffffff;
    font-family: 'MainFont', Arial, sans-serif;
  }

/* Circle for Sugarcubes to Rotate */
  .sugar-circle {
    position: relative;
    width: 500px;
    height: 500px;
    margin: -20px auto;
    perspective: 1200px;
    animation: spin-circle 30s linear infinite;
  }

  .cube-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 80px;
    height: 80px;
    margin-left: -40px;
    margin-top: -40px;
    text-decoration: none;
    cursor: pointer;
  }

  /* Floating text labels */
  .cube-label {
    position: absolute;
    bottom: -40px;
    left: 50%;
    transform: translateX(-80%);
    color: #2d3748;
    font-size: 1.5rem;
    white-space: nowrap;
    pointer-events: none;
    text-align: center;
    opacity: 0.9;
    transition: opacity 0.3s, transform 0.3s;
    animation: counter-spin-circle 30s linear infinite;
  }

  .cube-wrapper:hover .cube-label {
    opacity: 1;
    transform: translateX(-50%) translateY(-5px);
  }

  /* Individual cubes */
  .cube {
    width: 80px;
    height: 80px;
    transform-style: preserve-3d;
    transition: transform 0.4s ease;
    animation: float 3s ease-in-out infinite, cube-spin 8s linear infinite;
    position: relative;
    transform: rotateX(-20deg) rotateY(-20deg);
  }

  .cube-wrapper:hover .cube {
    transform: scale(1.3);
    animation-play-state: paused;
  }

  /* Pause the entire circle rotation on hover */
  .sugar-circle:has(.cube-wrapper:hover) {
    animation-play-state: paused;
  }

  /* Also pause label rotation when circle is paused */
  .sugar-circle:has(.cube-wrapper:hover) .cube-label {
    animation-play-state: paused;
  }

  /* Cube faces - with transparency to make it look 3d */
  .face {
    position: absolute;
    width: 80px;
    height: 80px;
    border: 1px solid rgba(200, 200, 200, 0.8);
    box-shadow: 
      inset 0 0 20px rgba(255,255,255,0.5),
      0 0 10px rgba(0,0,0,0.1);
    opacity: 0.9;
  }

  /* White for Sugarcube */
  .front {
    background: rgba(255, 255, 255, 0.9);
    transform: translateZ(40px);
  }

  .back {
    background: rgba(240, 240, 240, 0.9);
    transform: rotateY(180deg) translateZ(40px);
  }

  .top {
    background: rgba(255, 255, 255, 0.95);
    transform: rotateX(90deg) translateZ(40px);
  }

  .right {
    background: rgba(245, 245, 245, 0.9);
    transform: rotateY(90deg) translateZ(40px);
  }

  .left {
    background: rgba(235, 235, 235, 0.9);
    transform: rotateY(-90deg) translateZ(40px);
  }

  .bottom {
    background: rgba(220, 220, 220, 0.9);
    transform: rotateX(-90deg) translateZ(40px);
  }

  /* Position cubes in a circle */
  .cube-wrapper:nth-child(1) { transform: rotate(0deg) translate(200px) rotate(0deg); }
  .cube-wrapper:nth-child(2) { transform: rotate(72deg) translate(200px) rotate(-72deg); }
  .cube-wrapper:nth-child(3) { transform: rotate(144deg) translate(200px) rotate(-144deg); }
  .cube-wrapper:nth-child(4) { transform: rotate(216deg) translate(200px) rotate(-216deg); }
  .cube-wrapper:nth-child(5) { transform: rotate(288deg) translate(200px) rotate(-288deg); }
  .cube-wrapper:nth-child(6) { transform: rotate(60deg) translate(200px) rotate(-60deg); }
  .cube-wrapper:nth-child(7) { transform: rotate(120deg) translate(200px) rotate(-120deg); }
  .cube-wrapper:nth-child(8) { transform: rotate(180deg) translate(200px) rotate(-180deg); }
  .cube-wrapper:nth-child(9) { transform: rotate(240deg) translate(200px) rotate(-240deg); }
  .cube-wrapper:nth-child(10) { transform: rotate(300deg) translate(200px) rotate(-300deg); }

  /* Add staggered animation delays - FIXED: Added all 10 cubes */
  .cube-wrapper:nth-child(1) .cube { animation-delay: 0s; }
  .cube-wrapper:nth-child(2) .cube { animation-delay: 0.6s; }
  .cube-wrapper:nth-child(3) .cube { animation-delay: 1.2s; }
  .cube-wrapper:nth-child(4) .cube { animation-delay: 1.8s; }
  .cube-wrapper:nth-child(5) .cube { animation-delay: 2.4s; }
  .cube-wrapper:nth-child(6) .cube { animation-delay: 3.0s; }
  .cube-wrapper:nth-child(7) .cube { animation-delay: 3.6s; }
  .cube-wrapper:nth-child(8) .cube { animation-delay: 4.2s; }
  .cube-wrapper:nth-child(9) .cube { animation-delay: 4.8s; }
  .cube-wrapper:nth-child(10) .cube { animation-delay: 5.4s; }

  /* Circle rotation animation */
  @keyframes spin-circle {
    from { transform: rotateZ(0deg); }
    to { transform: rotateZ(360deg); }
  }

  /* Counter-rotation for labels to keep them horizontal */
  @keyframes counter-spin-circle {
    from { transform: translateX(-50%) rotateZ(0deg); }
    to { transform: translateX(-50%) rotateZ(-360deg); }
  }

  /* Individual cube floating animation */
  @keyframes float {
    0%, 100% { 
      transform: translateY(0px) rotateX(5deg) rotateY(5deg);
    }
    50% { 
      transform: translateY(-15px) rotateX(-5deg) rotateY(-5deg);
    }
  }

  /* Individual cube spinning animation */
  @keyframes cube-spin {
    from { 
      transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
    }
    to { 
      transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg);
    }
  }

  /* Content styling */
  .h1main {
    text-align: center;
    color: #2d3748;
    font-size: 2.5rem;
    margin-top: 40px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
  }

  /* Center teapot styling */
  .teapot-link {
    position: absolute;
    top: 140px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    transition: transform 0.3s ease;
  }

  .teapot-link:hover {
    transform: translateX(-50%) scale(1.1);
  }

  .teapot-image {
    width: 200px;
    height: 200px;
    object-fit: contain;
    border-radius: 10px;
  }

  main {
    max-width: 800px;
    margin: -30px auto;
    padding: 20px;
  }

  /* sugar cubes section */
  .posts-section {
    position: relative;
    max-width: 900px;
    margin: 20px auto 0px;
    padding: 20px;
  }

  /* Responsive adjustments - FIXED */
  @media (max-width: 768px) {
    .sugar-circle {
      width: 300px;
      height: 300px;
    }

    .cube-wrapper:nth-child(1) { transform: rotate(0deg) translate(120px) rotate(0deg); }
    .cube-wrapper:nth-child(2) { transform: rotate(72deg) translate(120px) rotate(-72deg); }
    .cube-wrapper:nth-child(3) { transform: rotate(144deg) translate(120px) rotate(-144deg); }
    .cube-wrapper:nth-child(4) { transform: rotate(216deg) translate(120px) rotate(-216deg); }
    .cube-wrapper:nth-child(5) { transform: rotate(288deg) translate(120px) rotate(-288deg); }
    .cube-wrapper:nth-child(6) { transform: rotate(60deg) translate(120px) rotate(-60deg); }
    .cube-wrapper:nth-child(7) { transform: rotate(120deg) translate(120px) rotate(-120deg); }
    .cube-wrapper:nth-child(8) { transform: rotate(180deg) translate(120px) rotate(-180deg); }
    .cube-wrapper:nth-child(9) { transform: rotate(240deg) translate(120px) rotate(-240deg); }
    .cube-wrapper:nth-child(10) { transform: rotate(300deg) translate(120px) rotate(-300deg); }

    .cube, .face {
      width: 60px;
      height: 60px;
    }

    .cube-wrapper {
      width: 60px;
      height: 60px;
      margin-left: -30px;
      margin-top: -30px;
    }

    .face.front { transform: translateZ(30px); }
    .face.back { transform: rotateY(180deg) translateZ(30px); }
    .face.top { transform: rotateX(90deg) translateZ(30px); }
    .face.right { transform: rotateY(90deg) translateZ(30px); }
    .face.left { transform: rotateY(-90deg) translateZ(30px); }
    .face.bottom { transform: rotateX(-90deg) translateZ(30px); }

    .teapot-image {
      width: 100px;
      height: 100px;
    }
  }
  </style>

  <title>{{ title }}</title>
  <link rel="stylesheet" href="{{ '/styles/style.css' | url }}">
</head>

<body>
  {% include "nav.njk" %}

  <h1 class="h1main">{{ title }}</h1>

  <!-- Rotating 3D sugar cube circle for posts -->
  <section class="posts-section">
    <!-- Center teapot image - outside the rotating circle -->
   <a href="{{ '/teapot/' | url }}" class="teapot-link">
      <img src="{{ '/assets/images/myteapot.jpg' | url }}" alt="Teapot" class="teapot-image">
    </a>
    
    <div class="sugar-circle">
      {% for post in collections.post %}
        {% if post.url != page.url %}
        <a href="{{ post.url | url }}" class="cube-wrapper" title="{{ post.data.title }}">
          <div class="cube">
            <div class="face front"></div>
            <div class="face back"></div>
            <div class="face left"></div>
            <div class="face right"></div>
            <div class="face top"></div>
            <div class="face bottom"></div>
          </div>
          <span class="cube-label">{{ post.data.title }}</span>
        </a>
        {% endif %}
      {% endfor %}
    </div>
  </section>

  <main>{{ content | safe }}</main>

  {% include "footer.njk" %}

</body>
</html>